# mkosi_rutoll
Изначально:
Цели
Разработать и внедрить автоматизированную систему сборки и обновления установочных образов ОС на базе актуальной версии Ubuntu (например, 24.04 LTS), включающую разные типы конфигураций (базовый образ и специализированные образы).

Система должна обеспечивать повторяемость сборки, контроль версий и простое внесение изменений.

Предпосылки и стратегическое соответствие
Сейчас используется Ubuntu 20.04 (устаревшая).

Установка выполняется через Clonezilla с выбором типа образа.

Есть несколько видов образов:

Базовый образ — ОС + пользователи (support, tech) + аудит.

Контроллер полосы — базовый образ + специализированный софт.

АРМ кассира-оператора — базовый образ + X-сервер + спец. софт + VNC.

АПП — базовый образ + спец. софт.

АРМ диспетчера — полная ОС с драйверами NVIDIA + спец. софт.

Программные продукты распространяются как .deb пакеты.

Нужно перейти на новую Ubuntu и создать систему сборки.

Требования
Актуальная версия Ubuntu (желательно LTS, например 24.04).

Автоматизированная сборка образов с нуля (не через Clonezilla).

Возможность определять тип образа в процессе сборки (или при установке).

Конфигурация и состав образа должны описываться в коде (Infrastructure as Code).

Возможность быстро пересобрать образ при обновлении пакетов или изменений в конфигурации.

Поддержка установки deb пакетов из внутреннего репозитория и/или директории образа.

Встроенные пользователи и права доступа:

support (sudo)

tech (без sudo)

Включён аудит системы (auditd).

Возможность развёртывания как на новые устройства, так и для обновления текущих.

Технические рекомендации
Для сборки образов:

Packer (HashiCorp) — автоматизация сборки ISO или QCOW2/RAW образов.

live-build (Debian/Ubuntu) — создание кастомных установочных ISO.

Альтернатива — Cubic (но лучше для ручных сборок).

Для конфигурации:

Ansible или cloud-init для установки пакетов, настройки пользователей и сервисов.

Для хранения:

Git-репозиторий с конфигурациями и скриптами.

Для деплоя:

PXE boot / Netboot + автоматическая установка.

Либо распространять готовые ISO-образы.

